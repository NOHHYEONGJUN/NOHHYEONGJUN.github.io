{{ $item := .item }}
{{ $link := $item.RelPermalink }}
{{ $target := "" }}

{{ if $item.Params.external_link }}
  {{ $link = $item.Params.external_link }}
  {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
{{ end }}

<div class="card">
  {{ with $item.Params.image }}
    {{ $image := . }}
    {{ if resources.Get . }}
      {{ $image = (resources.Get .).Fit "600x400" }}
    {{ end }}
    <a href="{{ $link }}" {{ $target | safeHTMLAttr }}>
      <img src="{{ $image }}" class="card-img-top" alt="{{ $item.Title }}" style="height: 200px; object-fit: cover;">
    </a>
  {{ end }}
  <div class="card-body">
    <h4 class="card-title mb-0">
      <a href="{{ $link }}" {{ $target | safeHTMLAttr }}>{{ $item.Title }}</a>
    </h4>
    {{ with $item.Params.subtitle }}
      <p class="card-text mt-1">{{ . }}</p>
    {{ end }}
    <div class="card-text">
      {{ if eq $item.Type "event" }}
        {{ partial "functions/get_event_dates" $item }}
      {{ else }}
        {{ with $item.Params.summary }}
          {{ . | markdownify | emojify }}
        {{ else }}
          {{ $item.Summary }}
        {{ end }}
      {{ end }}
    </div>
  </div>
</div>